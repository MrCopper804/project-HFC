<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HFC Mission - Decoder Pro</title>
    <style>
        :root {
            --bg: #000000;
            --glass: rgba(255, 255, 255, 0.05);
            --neon: #64ffda;
            --danger: #ff0055;
        }

        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: var(--bg);
            color: white; margin: 0; padding: 15px;
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh; overflow: hidden;
        }

        .header { width: 100%; display: flex; justify-content: space-between; font-weight: bold; color: var(--neon); margin-bottom: 20px; }

        /* Puzzle Display */
        .puzzle-card {
            width: 100%; max-width: 400px;
            background: var(--glass);
            border: 2px solid var(--neon);
            border-radius: 20px;
            padding: 30px 10px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 0 20px rgba(100, 255, 218, 0.1);
        }

        #symbolDisplay { font-size: 32px; letter-spacing: 5px; text-shadow: 0 0 10px var(--neon); }

        /* Input Display Area */
        .answer-preview {
            font-size: 24px; font-weight: bold; letter-spacing: 3px;
            height: 40px; color: var(--neon); margin-bottom: 20px;
        }

        /* Virtual Keypad */
        .keypad {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px; width: 100%; max-width: 400px;
        }

        .key {
            background: var(--glass);
            border: 1px solid rgba(255,255,255,0.1);
            color: white; padding: 15px 5px;
            border-radius: 10px; font-weight: bold;
            cursor: pointer; transition: 0.2s;
        }

        .key:active { background: var(--neon); color: black; transform: scale(0.9); }

        .controls { display: flex; gap: 10px; width: 100%; max-width: 400px; margin-top: 15px; }
        .btn { flex: 1; padding: 15px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; }
        .btn-clear { background: var(--danger); color: white; }
        .btn-submit { background: var(--neon); color: black; }

        .back-nav { margin-top: auto; padding: 20px; color: #555; text-decoration: none; font-size: 12px; }
    </style>
</head>
<body>

    <div class="header">
        <span>AGENT MISSIONS</span>
        <span>PTS: <span id="scoreDisplay">0</span></span>
    </div>

    <div class="puzzle-card">
        <div id="symbolDisplay">LOADING...</div>
        <p style="font-size: 10px; color: #888; margin-top: 10px;">DECODE THE CIPHER</p>
    </div>

    <div class="answer-preview" id="answerPreview">_ _ _ _</div>

    <div class="keypad" id="keypad"></div>

    <div class="controls">
        <button class="btn btn-clear" onclick="clearInput()">CLEAR</button>
        <button class="btn btn-submit" onclick="submitAnswer()">SUBMIT</button>
    </div>

    <a href="lobby.html" class="back-nav">TERMINATE MISSION</a>

<script>
    const hfcMapping = {'A': '+', 'B': '[]', 'C': '©', 'D': '÷', 'E': '=', 'F': '_', 'G': '>', 'H': '|', 'I': '!', 'J': '#', 'K': ':', 'L': '<', 'M': '*', 'N': '°', 'O': '()', 'P': '¶', 'Q': '?', 'R': '®', 'S': '$', 'T': '™', 'U': "'", 'V': '^', 'W': '&', 'X': '`', 'Y': '~', 'Z': '℅'};
    
    const wordBank = ["AGENT", "SECRET", "DARK", "MISSION", "CRYPT", "KEY", "DATA", "CYBER", "BOX", "STAR"];
    let targetWord = "";
    let userTyped = "";
    let score = parseInt(localStorage.getItem('hfcScore')) || 0;

    document.getElementById('scoreDisplay').innerText = score;

    // Shuffle and Create Keypad
    function setupKeypad() {
        const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('');
        const keypad = document.getElementById('keypad');
        keypad.innerHTML = "";
        letters.forEach(l => {
            const btn = document.createElement('button');
            btn.className = "key";
            btn.innerText = l;
            btn.onclick = () => {
                userTyped += l;
                updatePreview();
            };
            keypad.appendChild(btn);
        });
    }

    function updatePreview() {
        document.getElementById('answerPreview').innerText = userTyped || "_ _ _ _";
    }

    function clearInput() {
        userTyped = "";
        updatePreview();
    }

    function nextPuzzle() {
        targetWord = wordBank[Math.floor(Math.random() * wordBank.length)];
        let hfcText = targetWord.split('').map(c => hfcMapping[c] || c).join('');
        document.getElementById('symbolDisplay').innerText = hfcText;
        clearInput();
    }

    function submitAnswer() {
        if (userTyped === targetWord) {
            score += 2;
            localStorage.setItem('hfcScore', score);
            document.getElementById('scoreDisplay').innerText = score;
            alert("✓ CORRECT! +2 POINTS");
            nextPuzzle();
        } else {
            alert("✗ WRONG DECODE! TRY AGAIN");
            clearInput();
        }
    }

    setupKeypad();
    nextPuzzle();
</script>
</body>
</html>

